// Record destructuring tests

record Point { x: i64, y: i64 }
record Person { name: string, age: i64 }

tests {
    test "basic record destructuring" {
        let p = Point { x: 10, y: 20 }
        let { x, y } = p
        assert(x == 10)
        assert(y == 20)
    }

    test "record destructuring with rename" {
        let p = Point { x: 5, y: 15 }
        let { x: a, y: b } = p
        assert(a == 5)
        assert(b == 15)
    }

    test "partial record destructuring" {
        let p = Point { x: 100, y: 200 }
        let { x } = p
        assert(x == 100)
    }

    test "mutable record destructuring" {
        let p = Point { x: 1, y: 2 }
        let mut { x, y } = p
        x = 99
        assert(x == 99)
        assert(y == 2)
    }

    test "record with string field" {
        let person = Person { name: "Alice", age: 30 }
        let { name, age } = person
        assert(name == "Alice")
        assert(age == 30)
    }

    test "mixed rename destructuring" {
        let p = Point { x: 7, y: 8 }
        let { x, y: second } = p
        assert(x == 7)
        assert(second == 8)
    }
}
