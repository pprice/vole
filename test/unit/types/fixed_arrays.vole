// Fixed array tests

tests {
    test "repeat literal creation" {
        let arr: [i64; 5] = [0; 5]
        assert(true)
    }

    test "repeat literal access" {
        let arr: [i64; 3] = [42; 3]
        assert(arr[0] == 42)
        assert(arr[1] == 42)
        assert(arr[2] == 42)
    }

    test "repeat literal with expression" {
        let x = 10
        let arr: [i64; 2] = [x; 2]
        assert(arr[0] == 10)
        assert(arr[1] == 10)
    }

    test "fixed array string elements" {
        let arr: [string; 2] = ["hello"; 2]
        assert(arr[0] == "hello")
        assert(arr[1] == "hello")
    }

    test "fixed array modification" {
        var arr: [i64; 3] = [0; 3]
        arr[0] = 1
        arr[1] = 2
        arr[2] = 3
        assert(arr[0] == 1)
        assert(arr[1] == 2)
        assert(arr[2] == 3)
    }

    test "fixed array dynamic index" {
        let arr: [i64; 5] = [10; 5]
        let i = 2
        assert(arr[i] == 10)
    }

    test "fixed array dynamic modification" {
        var arr: [i64; 3] = [0; 3]
        let i = 1
        arr[i] = 42
        assert(arr[1] == 42)
    }

    test "fixed array destructuring" {
        let arr: [i64; 3] = [7; 3]
        let [a, b, c] = arr
        assert(a == 7)
        assert(b == 7)
        assert(c == 7)
    }

    test "fixed array destructuring with wildcard" {
        let arr: [i64; 3] = [1; 3]
        let [x, _, z] = arr
        assert(x == 1)
        assert(z == 1)
    }

    test "mutable fixed array destructuring" {
        let arr: [i64; 2] = [5; 2]
        var [a, b] = arr
        a = 10
        assert(a == 10)
        assert(b == 5)
    }

    test "fixed i128 repeat literal and mutation" {
        var arr: [i128; 3] = [0_i128; 3]
        let big = 1_i128 << 64
        arr[1] = big
        assert(arr[0] == 0_i128)
        assert(arr[1] == big)
        assert(arr[2] == 0_i128)
    }

    test "fixed f128 repeat literal and dynamic index mutation" {
        var arr: [f128; 3] = [0.5_f128; 3]
        let i = 2
        arr[i] = 9.25_f128
        assert(arr[0] == 0.5_f128)
        assert(arr[1] == 0.5_f128)
        assert(arr[2] == 9.25_f128)
    }
}
