// Test float types and literal coercion

tests "f32 type" {
    test "f32 positive" {
        let x: f32 = 1.5
        assert(x > 1.0)
        assert(x < 2.0)
    }

    test "f32 negative" {
        let x: f32 = -2.5
        assert(x < 0.0)
    }

    test "f32 zero" {
        let x: f32 = 0.0
        assert(x == 0.0)
    }

    test "f32 arithmetic" {
        let a: f32 = 10.0
        let b: f32 = 3.0
        assert(a + b > 12.0)
        assert(a - b > 6.0)
        assert(a * b > 29.0)
        assert(a / b > 3.0)
    }
}

tests "f64 type" {
    test "f64 default inference" {
        let x = 3.14
        assert(x > 3.0)
        assert(x < 4.0)
    }

    test "f64 explicit" {
        let x: f64 = 2.718281828
        assert(x > 2.7)
    }

    test "f64 negative" {
        let x: f64 = -1.5
        assert(x < 0.0)
    }

    test "f64 precision" {
        let x: f64 = 0.1
        let y: f64 = 0.2
        let sum = x + y
        assert(sum > 0.29)
        assert(sum < 0.31)
    }
}

tests "float arithmetic" {
    test "addition" {
        let a = 1.5
        let b = 2.5
        assert(a + b == 4.0)
    }

    test "subtraction" {
        let a = 5.0
        let b = 2.5
        assert(a - b == 2.5)
    }

    test "multiplication" {
        let a = 1.5
        assert(a * 2.0 == 3.0)
    }

    test "division" {
        let x = 7.0
        let y = 2.0
        assert(x / y == 3.5)
    }
}

tests "float comparisons" {
    test "less than" {
        let a: f64 = 1.5
        let b: f64 = 2.5
        assert(a < b)
    }

    test "greater than" {
        let a: f64 = 3.5
        let b: f64 = 2.5
        assert(a > b)
    }

    test "less than or equal" {
        let a: f64 = 2.5
        let b: f64 = 2.5
        assert(a <= b)
    }

    test "greater than or equal" {
        let a: f64 = 2.5
        let b: f64 = 2.5
        assert(a >= b)
    }

    test "f32 comparisons" {
        let a: f32 = 1.0
        let b: f32 = 2.0
        assert(a < b)
        assert(b > a)
    }

    test "f32 equality" {
        let a: f32 = 3.0_f32
        let b: f32 = 3.0_f32
        assert(a == b)
        assert(!(a != b))
    }

    test "f32 inequality" {
        let a: f32 = 3.0_f32
        let b: f32 = 4.0_f32
        assert(a != b)
        assert(!(a == b))
    }

    test "f32 all comparisons" {
        let a: f32 = 1.0_f32
        let b: f32 = 2.0_f32
        assert(a < b)
        assert(a <= b)
        assert(b > a)
        assert(b >= a)
        assert(a == a)
        assert(a != b)
    }
}

tests "f32 match patterns" {
    test "match f32 literal" {
        let x: f32 = 2.0_f32
        let result = match x {
            1.0_f32 => "one"
            2.0_f32 => "two"
            3.0_f32 => "three"
            _ => "other"
        }
        assert(result == "two")
    }

    test "match f32 wildcard" {
        let x: f32 = 99.0_f32
        let result = match x {
            1.0_f32 => "one"
            _ => "other"
        }
        assert(result == "other")
    }

    test "match f64 literal" {
        let x: f64 = 3.14
        let result = match x {
            1.0 => "one"
            3.14 => "pi"
            _ => "other"
        }
        assert(result == "pi")
    }
}

tests "f32 optional comparisons" {
    test "optional f32 equals value" {
        let x: f32? = 3.0_f32
        assert(x == 3.0_f32)
    }

    test "optional f32 not equals value" {
        let x: f32? = 3.0_f32
        assert(x != 5.0_f32)
    }

    test "nil f32 not equals value" {
        let x: f32? = nil
        assert(x != 3.0_f32)
    }

    test "nil f32 not equals zero" {
        let x: f32? = nil
        assert(!(x == 0.0_f32))
    }

    test "optional f64 equals value" {
        let x: f64? = 3.14
        assert(x == 3.14)
    }

    test "optional f64 not equals value" {
        let x: f64? = 3.14
        assert(x != 2.0)
    }

    test "nil f64 not equals value" {
        let x: f64? = nil
        assert(x != 3.14)
    }
}
