// Test f128 fields in class instances (wide 2-slot storage path)

class F128Box {
    value: f128
}

implement F128Box {
    func add(other: f128) -> f128 {
        return self.value + other
    }

    func get() -> f128 {
        return self.value
    }
}

class F128Pair {
    a: f128
    b: f128
}

class F128Mixed {
    name: string
    ratio: f128
    count: i64
}

tests "f128 class field storage" {
    test "store and load f128 field" {
        let c = F128Box { value: 100.5_f128 }
        assert(c.value > 100.0_f128)
        assert(c.value < 101.0_f128)
    }

    test "f128 field method access" {
        let c = F128Box { value: 10.0_f128 }
        assert(c.add(2.5_f128) == 12.5_f128)
    }

    test "f128 field getter" {
        let c = F128Box { value: 200.25_f128 }
        assert(c.get() > 200.0_f128)
        assert(c.get() < 200.3_f128)
    }

    test "f128 field mutation" {
        let c = F128Box { value: 1.0_f128 }
        c.value = -9.5_f128
        assert(c.value < 0.0_f128)
    }

    test "multiple f128 fields" {
        let p = F128Pair { a: 1.25_f128, b: 2.5_f128 }
        assert(p.a == 1.25_f128)
        assert(p.b == 2.5_f128)
    }

    test "mixed f128 and other fields" {
        let m = F128Mixed { name: "mix", ratio: 0.5_f128, count: 42 }
        assert(m.name == "mix")
        assert(m.ratio == 0.5_f128)
        assert(m.count == 42)
    }
}
