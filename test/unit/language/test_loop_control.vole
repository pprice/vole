// Tests for break and continue statements

tests {

    test "break in while loop" {
        let mut count = 0
        let mut i = 0
        while i < 100 {
            if i == 5 {
                break
            }
            count = count + 1
            i = i + 1
        }
        assert(count == 5)
    }

    test "break exits immediately" {
        let mut x = 0
        while true {
            x = 1
            break
            x = 2  // Should never execute
        }
        assert(x == 1)
    }

    test "continue in while loop" {
        let mut sum = 0
        let mut i = 0
        while i < 10 {
            i = i + 1
            if i % 2 == 0 {
                continue
            }
            sum = sum + i
        }
        // sum of odd numbers 1-9: 1+3+5+7+9 = 25
        assert(sum == 25)
    }

    test "continue skips rest of iteration" {
        let mut x = 0
        let mut i = 0
        while i < 3 {
            i = i + 1
            continue
            x = x + 100  // Should never execute
        }
        assert(x == 0)
    }

    test "break in for loop" {
        let mut sum = 0
        for i in 0..100 {
            if i >= 5 {
                break
            }
            sum = sum + i
        }
        // 0+1+2+3+4 = 10
        assert(sum == 10)
    }

    test "continue in for loop" {
        let mut sum = 0
        for i in 0..10 {
            if i % 2 == 0 {
                continue
            }
            sum = sum + i
        }
        // sum of odd numbers 1-9: 1+3+5+7+9 = 25
        assert(sum == 25)
    }

    test "break in nested loops - inner only" {
        let mut count = 0
        for i in 0..3 {
            for j in 0..10 {
                if j >= 2 {
                    break
                }
                count = count + 1
            }
        }
        // 3 outer iterations * 2 inner iterations = 6
        assert(count == 6)
    }

    test "continue in nested loops - inner only" {
        let mut sum = 0
        for i in 0..3 {
            for j in 0..4 {
                if j % 2 == 0 {
                    continue
                }
                sum = sum + 1
            }
        }
        // 3 outer * 2 odd values (1,3) = 6
        assert(sum == 6)
    }

    test "break with array iteration" {
        let arr = [10, 20, 30, 40, 50]
        let mut sum = 0
        for item in arr {
            if item > 25 {
                break
            }
            sum = sum + item
        }
        // 10 + 20 = 30
        assert(sum == 30)
    }

    test "continue with array iteration" {
        let arr = [1, 2, 3, 4, 5, 6]
        let mut sum = 0
        for item in arr {
            if item % 2 == 0 {
                continue
            }
            sum = sum + item
        }
        // 1 + 3 + 5 = 9
        assert(sum == 9)
    }

    test "break and continue in same loop" {
        let mut sum = 0
        let mut i = 0
        while i < 20 {
            i = i + 1
            if i % 2 == 0 {
                continue  // Skip even numbers
            }
            if i > 10 {
                break  // Stop after 10
            }
            sum = sum + i
        }
        // Odd numbers 1-9: 1+3+5+7+9 = 25
        assert(sum == 25)
    }

    test "break in inclusive range" {
        let mut count = 0
        for i in 1..=100 {
            if i > 5 {
                break
            }
            count = count + 1
        }
        assert(count == 5)
    }
}
