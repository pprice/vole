// Test: Generic class methods with type parameter substitution
// Bug fix: Methods on generic classes like Box<T> now properly substitute
// type parameters (T -> i32) in method signatures

class Box<T> {
    value: T,

    func get() -> T {
        return self.value
    }

    func set(v: T) {
        self.value = v
    }
}

class Pair<A, B> {
    first: A,
    second: B,

    func getFirst() -> A {
        return self.first
    }

    func getSecond() -> B {
        return self.second
    }
}

tests {
    test "generic class method - get i32" {
        let box = Box { value: 42 }
        assert(box.get() == 42)
    }

    test "generic class method - set i32" {
        let box = Box { value: 42 }
        box.set(100)
        assert(box.get() == 100)
    }

    test "generic class method - get string" {
        let box = Box { value: "hello" }
        assert(box.get() == "hello")
    }

    test "generic class method - get bool" {
        let box = Box { value: true }
        assert(box.get() == true)
    }

    test "generic class method - set bool" {
        let box = Box { value: true }
        box.set(false)
        assert(box.get() == false)
    }

    test "generic class method - get f64" {
        let box = Box { value: 3.14 }
        assert(box.get() == 3.14)
    }

    test "generic class method - set f64" {
        let box = Box { value: 3.14 }
        box.set(2.71)
        assert(box.get() == 2.71)
    }

    test "generic class with two type params" {
        let pair = Pair { first: 10, second: "ten" }
        assert(pair.getFirst() == 10)
        assert(pair.getSecond() == "ten")
    }
}
