// Test match guards

tests "wildcard with guards" {
    test "basic guard evaluation" {
        let score = 85
        let grade = match score {
            _ if score >= 90 => "A"
            _ if score >= 80 => "B"
            _ if score >= 70 => "C"
            _ => "F"
        }
        assert(grade == "B")
    }

    test "first guard matches" {
        let score = 95
        let grade = match score {
            _ if score >= 90 => "A"
            _ if score >= 80 => "B"
            _ => "F"
        }
        assert(grade == "A")
    }

    test "fallback to bare wildcard" {
        let score = 50
        let grade = match score {
            _ if score >= 90 => "A"
            _ if score >= 80 => "B"
            _ if score >= 70 => "C"
            _ => "F"
        }
        assert(grade == "F")
    }

    test "guard with complex condition" {
        let x = 15
        let result = match x {
            _ if x > 10 && x < 20 => "teen"
            _ if x >= 20 => "adult"
            _ => "child"
        }
        assert(result == "teen")
    }

    test "guard with equality" {
        let x = 42
        let result = match x {
            _ if x == 42 => "answer"
            _ => "other"
        }
        assert(result == "answer")
    }

    test "negative number guards" {
        let x = -5
        let result = match x {
            _ if x > 0 => "positive"
            _ if x < 0 => "negative"
            _ => "zero"
        }
        assert(result == "negative")
    }
}

tests "guard edge cases" {
    test "single guarded wildcard with fallback" {
        let x = 10
        let result = match x {
            _ if x > 100 => "big"
            _ => "small"
        }
        assert(result == "small")
    }

    test "all guards fail, bare wildcard catches" {
        let x = 0
        let result = match x {
            _ if x > 0 => "positive"
            _ if x < 0 => "negative"
            _ => "zero"
        }
        assert(result == "zero")
    }
}
