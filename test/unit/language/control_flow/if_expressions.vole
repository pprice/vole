// Tests for conditional expressions using `when`
// Note: `if` is now statement-only; use `when` for conditional values

tests "when as conditional expression" {
    test "simple when returns value" {
        let sign = when { 10 > 0 => "positive", _ => "non-positive" }
        assert(sign == "positive")
    }

    test "when returns else branch" {
        let sign = when { -5 > 0 => "positive", _ => "non-positive" }
        assert(sign == "non-positive")
    }

    test "when expression with integers" {
        let abs = when { -10 < 0 => 10, _ => -10 }
        assert(abs == 10)
    }

    test "when with multiple conditions" {
        let sign = when {
            0 > 0 => "positive",
            0 < 0 => "negative",
            _ => "zero"
        }
        assert(sign == "zero")
    }

    test "nested when expression" {
        let result = when {
            5 > 0 => when { 10 > 5 => "b", _ => "a" },
            _ => "neg"
        }
        assert(result == "b")
    }

    test "nested when expression inner else" {
        let result = when {
            5 > 0 => when { 10 < 5 => "b", _ => "a" },
            _ => "neg"
        }
        assert(result == "a")
    }

    test "nested when expression outer else" {
        let result = when {
            5 < 0 => when { 10 > 5 => "b", _ => "a" },
            _ => "neg"
        }
        assert(result == "neg")
    }

    test "deeply nested when expression" {
        let result = when {
            1 > 0 => when {
                2 > 0 => when { 3 > 0 => "deep", _ => "c" },
                _ => "b"
            },
            _ => "a"
        }
        assert(result == "deep")
    }

    test "when expression arithmetic" {
        let result = when { 3 > 5 => 3 * 2, _ => 3 * 3 }
        assert(result == 9)
    }
}
