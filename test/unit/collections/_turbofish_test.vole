// Test: Turbofish syntax for explicit type arguments on static method calls
// Prefixed with _ to skip by default until fully implemented

class Container<T> {
    value: T,

    statics {
        func new(v: T) -> Container<T> {
            return Container { value: v }
        }
    }

    func get() -> T {
        return self.value
    }
}

// Generic container with two type params
class Pair<K, V> {
    key: K,
    value: V,

    statics {
        func make(k: K, v: V) -> Pair<K, V> {
            return Pair { key: k, value: v }
        }
    }

    func get_key() -> K {
        return self.key
    }

    func get_value() -> V {
        return self.value
    }
}

tests {
    test "turbofish with single type param" {
        // Explicit type arg with turbofish
        let c = Container.new<i64>(42)
        assert(c.get() == 42)
    }

    test "turbofish with two type params" {
        // Explicit type args with turbofish
        let p = Pair.make<string, i64>("key", 123)
        assert(p.get_key() == "key")
        assert(p.get_value() == 123)
    }

    test "turbofish not required when inferable" {
        // Type can be inferred from argument
        let c = Container.new(42)
        assert(c.get() == 42)
    }
}
