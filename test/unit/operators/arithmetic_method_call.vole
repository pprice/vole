// Test that arithmetic results can call methods (v-2863)
// This tests proper type promotion between codegen and sema

tests "i32 arithmetic method calls" {
    test "i32 add with method" {
        let x: i32 = 42
        let y = x + 1
        assert(y.to_string() == "43")
    }
    
    test "i32 mul with method" {
        let x: i32 = 42
        let z = x * 2
        assert(z.to_string() == "84")
    }
    
    test "i32 sub with method" {
        let x: i32 = 42
        let w = x - 10
        assert(w.to_string() == "32")
    }
}

tests "mixed integer type arithmetic" {
    test "i32 + i64 = i64" {
        let x: i32 = 10
        let y: i64 = 20
        let z = x + y  // Should promote to i64
        assert(z.to_string() == "30")
    }
    
    test "i16 + default literal" {
        let x: i16 = 100
        let y = x + 1  // 1 is i64 by default, result is i64
        assert(y.to_string() == "101")
    }
}

tests "explicit type annotations work" {
    test "i32 with explicit annotation" {
        let x: i32 = 42
        let y: i32 = x + 1  // Explicit i32
        assert(y.to_string() == "43")
    }
    
    test "i32 with typed literal" {
        let x: i32 = 42
        let y = x + 1_i32  // Explicitly i32 literal
        assert(y.to_string() == "43")
    }
}
