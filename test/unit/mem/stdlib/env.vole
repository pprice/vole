let env = import "std:env"

tests "mem std:env vars" {
    test "env.vars returns array of string pairs" {
        let vars = env.vars()
        assert(vars.length() > 0)

        let first = vars[0]
        assert(first.length() == 2)
        assert(first[0].length() >= 0)
        assert(first[1].length() >= 0)
    }

    test "env.vars repeated allocations and drops" {
        var i = 0
        while i < 16 {
            let vars = env.vars()
            if vars.length() > 0 {
                let pair = vars[0]
                _ = pair[0].length()
                _ = pair[1].length()
            }
            i = i + 1
        }
        assert(i == 16)
    }
}
