# Generics-heavy profile â€” stress generic instantiation and monomorphization.
#
# Generates code that heavily uses generics to test:
# - Deeply parameterized types: Foo<Bar<Baz<Qux<T>>>>
# - Multiple constraints: T: Hashable + Serializable + Comparable
# - Generic methods on generic classes
# - Generic lambdas passed to generic functions
# - Chained generic method calls
# - Many monomorphization sites (same generic with different type args)
#
# Target: stress type inference, constraint checking, monomorph cache.

[plan]
layers = 2
modules_per_layer = 3
structs_per_module = [0, 1]
classes_per_module = [3, 5]
interfaces_per_module = [3, 5]
functions_per_module = [4, 6]
globals_per_module = [1, 2]
fields_per_struct = [2, 3]
fields_per_class = [2, 4]
methods_per_class = [3, 5]
static_methods_per_class = [0, 0]
static_methods_per_struct = [0, 0]
methods_per_interface = [2, 4]
fields_per_error = [0, 2]
params_per_function = [2, 4]
type_params_per_class = [2, 4]
type_params_per_interface = [0, 3]
type_params_per_function = [2, 4]
constraints_per_type_param = [1, 3]
interface_extends_probability = 0.5
implement_blocks_per_module = [1, 3]
fallible_probability = 0.1
generator_probability = 0.1
nested_class_field_probability = 0.0
struct_param_probability = 0.0
struct_return_probability = 0.0
interface_param_probability = 0.0
generic_closure_interface_fn_probability = 0.2
closure_return_probability = 0.08
sentinels_per_module = [0, 0]

[emit]
expr_body_probability = 0.15

[emit.stmt_config]
max_depth = 2
statements_per_block = [2, 3]
if_probability = 0.2
while_probability = 0.1
for_probability = 0.15
reassign_probability = 0.12
raise_probability = 0.08
try_probability = 0.1
tuple_probability = 0.1
fixed_array_probability = 0.1
struct_destructure_probability = 0.1
class_destructure_probability = 0.08
early_return_probability = 0.12
else_if_probability = 0.25
static_call_probability = 0.0
array_index_assign_probability = 0.08
array_push_probability = 0.05
array_index_compound_assign_probability = 0.08
mutable_array_probability = 0.3
method_call_probability = 0.0
interface_dispatch_probability = 0.0
match_probability = 0.06
string_match_probability = 0.04
when_let_probability = 0.06
nested_loop_probability = 0.04
union_match_probability = 0.06
iter_map_filter_probability = 0.06
iface_function_call_probability = 0.0
generic_closure_interface_probability = 0.2
empty_array_iter_probability = 0.04
match_closure_arm_probability = 0.06
range_iter_probability = 0.04
field_closure_let_probability = 0.04
sentinel_union_probability = 0.0
optional_destructure_match_probability = 0.0
sentinel_closure_capture_probability = 0.0
closure_struct_capture_probability = 0.0
nested_closure_capture_probability = 0.0
string_interpolation_probability = 0.08
match_on_method_result_probability = 0.0
iter_method_map_probability = 0.0
string_split_probability = 0.0
string_method_probability = 0.0
iter_predicate_probability = 0.0
iter_chunks_windows_probability = 0.0

[emit.stmt_config.expr_config]
max_depth = 3
binary_probability = 0.3
when_probability = 0.1
match_probability = 0.1
if_expr_probability = 0.1
method_chain_probability = 0.15
max_match_arms = 5
inline_expr_arg_probability = 0.1
tuple_index_probability = 0.12
chained_coalesce_probability = 0.25
string_method_probability = 0.1
multi_arm_when_probability = 0.25
match_guard_probability = 0.1
closure_capture_probability = 0.25
